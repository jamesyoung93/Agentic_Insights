{
  "nodes": [
    {
      "id": "csv_data",
      "type": "source",
      "label": "CSV Data\n(customers.csv,\ncompetitor_data.csv)",
      "shape": "cylinder",
      "description": "Customer and competitor transaction data"
    },
    {
      "id": "literature_kb",
      "type": "source",
      "label": "Literature KB\n(knowledge/literature/)",
      "shape": "cylinder",
      "description": "Curated research papers"
    },
    {
      "id": "openai_api",
      "type": "external",
      "label": "OpenAI API\n(GPT-3.5/GPT-4)",
      "shape": "hexagon",
      "description": "LLM for question generation and synthesis"
    },
    {
      "id": "data_ingestion",
      "type": "process",
      "label": "Data Ingestion\n& Preprocessing",
      "shape": "rectangle",
      "description": "Load, merge, clean, and impute data"
    },
    {
      "id": "discovery_engine",
      "type": "process",
      "label": "Discovery Cycle\nEngine",
      "shape": "rectangle",
      "description": "Orchestrates discovery cycles (question → analysis → synthesis)"
    },
    {
      "id": "statistical_analysis",
      "type": "process",
      "label": "Statistical Analysis\nEngine (scipy)",
      "shape": "rectangle",
      "description": "Correlations, regressions, ANOVA, t-tests, effect sizes"
    },
    {
      "id": "literature_agent",
      "type": "process",
      "label": "Literature Search\nAgent",
      "shape": "rectangle",
      "description": "Searches knowledge base using LLM"
    },
    {
      "id": "world_model",
      "type": "store",
      "label": "World Model\n(Knowledge State)",
      "shape": "cylinder",
      "description": "Discoveries, trajectories, hypotheses, cycle summaries"
    },
    {
      "id": "report_generator",
      "type": "process",
      "label": "Enhanced Report\nGenerator",
      "shape": "rectangle",
      "description": "Extracts statistics and formats reports"
    },
    {
      "id": "streamlit_ui",
      "type": "serve",
      "label": "Streamlit Web UI",
      "shape": "parallelogram",
      "description": "Interactive web interface for users"
    },
    {
      "id": "reports",
      "type": "output",
      "label": "Discovery Reports\n(.txt)",
      "shape": "parallelogram",
      "description": "Enhanced reports with statistical evidence"
    },
    {
      "id": "world_model_json",
      "type": "output",
      "label": "World Model\n(world_model.json)",
      "shape": "parallelogram",
      "description": "Persistent knowledge state"
    }
  ],
  "edges": [
    {
      "from": "csv_data",
      "to": "data_ingestion",
      "label": "CSV files\n(batch)",
      "protocol": "file I/O",
      "trigger": "user-initiated"
    },
    {
      "from": "data_ingestion",
      "to": "discovery_engine",
      "label": "Cleaned DataFrame\n(pandas)",
      "protocol": "in-memory",
      "trigger": "on-load"
    },
    {
      "from": "discovery_engine",
      "to": "statistical_analysis",
      "label": "Research questions\n+ DataFrame",
      "protocol": "function call",
      "trigger": "per-cycle"
    },
    {
      "from": "discovery_engine",
      "to": "literature_agent",
      "label": "Search queries",
      "protocol": "function call",
      "trigger": "per-question (optional)"
    },
    {
      "from": "discovery_engine",
      "to": "openai_api",
      "label": "Question generation\n& synthesis prompts\n(REST/JSON)",
      "protocol": "REST API",
      "trigger": "per-cycle (optional)"
    },
    {
      "from": "openai_api",
      "to": "discovery_engine",
      "label": "Generated questions\n& discoveries (JSON)",
      "protocol": "REST API",
      "trigger": "response"
    },
    {
      "from": "literature_kb",
      "to": "literature_agent",
      "label": "Text files\n(batch read)",
      "protocol": "file I/O",
      "trigger": "on-query"
    },
    {
      "from": "literature_agent",
      "to": "openai_api",
      "label": "Search & summarization\n(REST/JSON)",
      "protocol": "REST API",
      "trigger": "per-query"
    },
    {
      "from": "statistical_analysis",
      "to": "discovery_engine",
      "label": "Statistical evidence\n(p-values, effect sizes)",
      "protocol": "return value",
      "trigger": "immediate"
    },
    {
      "from": "literature_agent",
      "to": "discovery_engine",
      "label": "Literature findings\n(dict)",
      "protocol": "return value",
      "trigger": "immediate"
    },
    {
      "from": "discovery_engine",
      "to": "world_model",
      "label": "Discoveries +\nTrajectories",
      "protocol": "object methods",
      "trigger": "per-cycle"
    },
    {
      "from": "world_model",
      "to": "world_model_json",
      "label": "JSON serialization\n(on save)",
      "protocol": "file I/O",
      "trigger": "end-of-session"
    },
    {
      "from": "world_model",
      "to": "report_generator",
      "label": "Discoveries +\nTrajectories",
      "protocol": "function call",
      "trigger": "end-of-discovery"
    },
    {
      "from": "report_generator",
      "to": "reports",
      "label": "Formatted text\n(UTF-8)",
      "protocol": "file I/O",
      "trigger": "immediate"
    },
    {
      "from": "discovery_engine",
      "to": "streamlit_ui",
      "label": "Progress updates\n& logs",
      "protocol": "session state",
      "trigger": "real-time"
    },
    {
      "from": "streamlit_ui",
      "to": "discovery_engine",
      "label": "User config\n(objective, cycles)",
      "protocol": "session state",
      "trigger": "user-initiated"
    },
    {
      "from": "reports",
      "to": "streamlit_ui",
      "label": "Download link",
      "protocol": "file read",
      "trigger": "on-request"
    }
  ],
  "metadata": {
    "system_name": "Kosmos AI Scientist (Agentic Insights)",
    "primary_entry_point": "streamlit_app_ULTIMATE.py",
    "main_trigger": "User initiates discovery via Streamlit UI",
    "key_technologies": ["Python", "Streamlit", "OpenAI API", "scipy", "pandas"],
    "deployment": "Local Python application with optional OpenAI API integration"
  }
}
